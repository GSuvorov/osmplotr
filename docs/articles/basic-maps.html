<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Maps • osmplotr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">osmplotr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/osmplotr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Basic Maps</h1>
                        <h4 class="author">Mark Padgham</h4>
            
            <h4 class="date">2017-06-07</h4>
          </div>

    
    
<div class="contents">
<p><code>osmplotr</code> enables OpenStreetMap (OSM) data to be downloaded (using the <a href="https://overpass-api.de">overpass API</a>) and used to produce highly customisable maps. This vignette demonstrates both data downloading and the creation of simple maps. The subsequent vignette (‘data-maps’) demonstrates how <code>osmplotr</code> enables user-defined data to be visualised using OSM data. The maps in this vignette represent a small portion of central London, U.K.</p>
<div id="contents" class="section level2">
<h2 class="hasAnchor">
<a href="#contents" class="anchor"></a>Contents</h2>
<p><a href="#1%20intro">1. Introduction</a></p>
<p><a href="#2%20downloading">2. Downloading Data</a></p>
<p><a href="#2.1%20negation">    2.1 Negation</a></p>
<p><a href="#2.2%20keyval-pairs">    2.2 Additional <code>key-value</code> pairs</a></p>
<p><a href="#2.3%20rivers">    2.3 A note on rivers</a></p>
<p><a href="#2.4%20downloading2">    2.4 Downloading with <code>osm_structures</code> and <code>make_osm_map</code></a></p>
<p><a href="#2.4.1%20london-data">          2.4.1 The <code>london</code> data of <code>osmplotr</code></a></p>
<p><a href="#2.5%20highways">    2.5 Downloading connected highways</a></p>
<p><a href="#2.5.1%20highways-detail">          2.5.1 <code>connect_highways</code> in detail</a></p>
<p><a href="#3%20maps">3. Producing maps</a></p>
<p><a href="#3.1%20saving-maps">    3.1 Saving Maps</a></p>
<p><a href="#3.2%20osm-structures">    3.2 Plotting different OSM Structures</a></p>
<p><a href="#3.3%20make-osm-map">    3.3. Automating map production</a></p>
<p><a href="#3.4%20axes">    3.4 Axes</a></p>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a><a name="1%20intro"></a>1. Introduction</h2>
<p>A map can be generated using the following simple steps:</p>
<ol style="list-style-type: decimal">
<li>Specify the bounding box for the desired region</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bbox &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_bbox.html">get_bbox</a></span> (<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.50</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span>))</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Download the desired data—in this case, all building perimeters.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_B &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'building'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Initiate an <code>osm_basemap</code> with desired background (<code>bg</code>) colour</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_basemap.html">osm_basemap</a></span> (<span class="dt">bbox =</span> bbox, <span class="dt">bg =</span> <span class="st">'gray20'</span>)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Add desired plotting objects in the desired colour.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_B, <span class="dt">col =</span> <span class="st">'gray40'</span>)</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Print the map</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a1.png">
</div>
<p>The function <code>print_osm_map</code> creates a graphics device that is scaled to the bounding box of the map. Note also that <code>osmplotr</code> maps contain no margins and fill the entire plot area. Additional capabilities of <code>osmplotr</code> are described in the following sections, beginning with downloading and extraction of data.</p>
</div>
<div id="downloading-data" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-data" class="anchor"></a><a name="2%20downloading"></a>2. Downloading Data</h2>
<p>The main function for downloading OSM data from the <a href="https://overpass-api.de">overpass API</a> is <code>extract_osm_objects</code>. Data of a particular type can be extracted by passing the appropriate OSM <code>key</code>, as in the above example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bbox &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_bbox.html">get_bbox</a></span> (<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.51</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span>))
dat_B &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'building'</span>, <span class="dt">bbox =</span> bbox)
dat_H &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'highway'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>These objects are of appropriate <code>Spatial</code> classes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span> (dat_B); <span class="kw">class</span> (dat_H)</code></pre></div>
<pre><code>## [1] "SpatialPolygonsDataFrame"
## attr(,"package")
## [1] "sp"</code></pre>
<pre><code>## [1] "SpatialLinesDataFrame"
## attr(,"package")
## [1] "sp"</code></pre>
<p>The <code>SpatialPolygonsDataFrame</code> and <code>SpatialLinesDataFrame</code> of London buildings and highways respectively contain</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span> (dat_B); <span class="kw">length</span> (dat_H)</code></pre></div>
<pre><code>## [1] 2178</code></pre>
<pre><code>## [1] 2139</code></pre>
<p>… 2,178 building polygons and 2,139 highway lines. <code>extract_osm_objects</code> also accepts <code>key-value</code> pairs which are passed to the <a href="https://overpass-api.de">overpass API</a> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_T &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'natural'</span>, <span class="dt">value =</span> <span class="st">'tree'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>Trees are located by single coordinates and are thus <code>SpatialPoints</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span> (dat_T); <span class="kw">length</span> (dat_T)</code></pre></div>
<pre><code>## [1] "SpatialPointsDataFrame"
## attr(,"package")
## [1] "sp"</code></pre>
<pre><code>## [1] 1310</code></pre>
</div>
<div id="negation" class="section level2">
<h2 class="hasAnchor">
<a href="#negation" class="anchor"></a><a name="2.1%20negation"></a>2.1 Negation</h2>
<p>Negation can be specified by pre-pending <code>!</code> to the <code>value</code> argument so that, for example, all <code>natural</code> objects that are <strong>not</strong> trees can be extracted with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_NT &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'natural'</span>, <span class="dt">value =</span> <span class="st">'!tree'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p><code>london$dat_H</code> contains all non-primary highways, and was extracted with,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_H &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'highway'</span>, <span class="dt">value =</span> <span class="st">'!primary'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
</div>
<div id="additional-key-value-pairs" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-key-value-pairs" class="anchor"></a><a name="2.2%20keyval-pairs"></a>2.2 Additional <code>key-value</code> pairs</h2>
<p>Any number of <code>key-value</code> pairs may be passed to <code>extract_osm_objects</code>. For example, a named building can be extracted with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">extra_pairs &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'name'</span>, <span class="st">'Royal.Festival.Hall'</span>)
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'building'</span>, <span class="dt">extra_pairs =</span> extra_pairs,
                                       <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>This data is stored in <code>london$dat_RFH</code>. Note that periods or dots are used for whitespace, and in fact symbolise (in <code>grep</code> terms) any character whatsoever. The polygon of a building at a particular street address can be extracted with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">extra_pairs &lt;-<span class="st"> </span><span class="kw">list</span> (<span class="kw">c</span> (<span class="st">'addr:street'</span>, <span class="st">'Stamford.St'</span>),
                     <span class="kw">c</span> (<span class="st">'addr:housenumber'</span>, <span class="st">'150'</span>))
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'building'</span>, <span class="dt">extra_pairs =</span> extra_pairs,
                                      <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>This data is stored as <code>london$dat_ST</code>. Note that addresses generally require combining both <code>addr:street</code> with <code>addr:housenumber</code>.</p>
</div>
<div id="a-note-on-rivers" class="section level2">
<h2 class="hasAnchor">
<a href="#a-note-on-rivers" class="anchor"></a><a name="2.3%20rivers"></a>2.3 A note on rivers</h2>
<p>OSM objects are extracted within <code>R</code> through using the <code>osmar</code> package which does not currently handle the extraction of rivers in a failsafe way. Rivers are generally defined by <code>(key,value) = ('waterway','riverbank')</code>, with relations returned as an OSM <code>multipolygon</code>. These <code>multipolygon</code> objects are, however, <strong>not</strong> extracted by <code>osmar</code> when they extend beyond a requested <code>bbox</code>, and there is no way to know in advance whether or not that may be the case. This requests to download river polygons may not yield the desired results. This problem will be addressed in future releases of <code>osmplotr</code>.</p>
</div>
<div id="downloading-with-osm_structures-and-make_osm_map" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-with-osm_structures-and-make_osm_map" class="anchor"></a><a name="2.4%20downloading2"></a>2.4 Downloading with <code>osm_structures</code> and <code>make_osm_map</code>
</h2>
<p>The functions <code>osm_structures</code> and <code>make_osm_map</code> aid both downloading multiple OSM data types and plotting (with the latter described below). <code>osm_structures</code> returns a <code>data.frame</code> of OSM structure types, associated <code>key-value</code> pairs, unique suffices which may be appended to data structures for storage purposes, and suggested colours. Passing this list to <code>make_osm_map</code> will return a list of the requested OSM data items, named through combining the <code>dat_prefix</code> specified in <code>make_osm_map</code> and the suffices specified in <code>osm_structures</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> ()</code></pre></div>
<pre><code>##     structure      key value suffix      cols
## 1    building building           BU #646464FF
## 2     amenity  amenity            A #787878FF
## 3    waterway waterway            W #646478FF
## 4       grass  landuse grass      G #64A064FF
## 5     natural  natural            N #647864FF
## 6        park  leisure  park      P #647864FF
## 7     highway  highway            H #000000FF
## 8    boundary boundary           BO #C8C8C8FF
## 9        tree  natural  tree      T #64A064FF
## 10 background                          gray20</code></pre>
<p>Many structures are identified by keys only, in which cases the values are empty strings.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span>()<span class="op">$</span>value [<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</code></pre></div>
<pre><code>## [1] ""      ""      ""      "grass"</code></pre>
<p>The last row of <code>osm_structures</code> exists only to define the background colour of the map, as explained below (<a href="#3.3%20make-osm-map">3.3. Automating map production</a>).</p>
<p>The suffices include as many letters as are necessary to represent all unique structure names. <code>make_osm_map</code> returns a list of two components:</p>
<ol style="list-style-type: decimal">
<li>
<code>osm_data</code> containing the data objects passed in the <code>osm_structures</code> argument. Any existing <code>osm_data</code> may also be submitted to <code>make_osm_map</code>, in which case any objects not present in the submitted data will be appended to the returned version. If <code>osm_data</code> is not submitted, all objects in <code>osm_structures</code> will be downloaded and returned.</li>
<li>
<code>map</code> containing the <code>ggplot2</code> map objects with layers overlaid according to the sequence and colour schemes specified in <code>osm_structures</code>
</li>
</ol>
<p>The data specified in <code>osm_structures</code> can then be downloaded simply by calling:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> <span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (), <span class="dt">bbox =</span> bbox)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span> (dat); <span class="kw">sapply</span> (dat, class); <span class="kw">names</span> (dat<span class="op">$</span>osm_data)</code></pre></div>
<pre><code>## [1] "osm_data" "map"</code></pre>
<pre><code>## $osm_data
## [1] "list"
## 
## $map
## [1] "gg"     "ggplot"</code></pre>
<pre><code>## [1] "dat_BU" "dat_A"  "dat_W"  "dat_G"  "dat_N"  "dat_P"  "dat_H"  "dat_BO"
## [9] "dat_T"</code></pre>
<p>The requested data are contained in <code>dat$osm_data</code>. A list of desired structures can also be passed to this function, for example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (<span class="dt">structures =</span> <span class="kw">c</span>(<span class="st">'building'</span>, <span class="st">'highway'</span>))</code></pre></div>
<pre><code>##    structure      key value suffix      cols
## 1   building building            B #646464FF
## 2    highway  highway            H #000000FF
## 3 background                          gray20</code></pre>
<p>Passing this to <code>make_osm_map</code> will download only these two structures. Finally, note that the example of,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (<span class="dt">structures =</span> <span class="st">'grass'</span>)</code></pre></div>
<pre><code>##    structure     key value suffix      cols
## 1      grass landuse grass      G #64A064FF
## 2 background                         gray20</code></pre>
<p>demonstrates that <code>osm_structures</code> converts a number of common <code>keys</code> to OSM-appropriate <code>key-value</code> pairs.</p>
<div id="the-london-data-of-osmplotr" class="section level3">
<h3 class="hasAnchor">
<a href="#the-london-data-of-osmplotr" class="anchor"></a><a name="2.4.1%20london-data"></a>2.4.1 The <code>london</code> data of <code>osmplotr</code>
</h3>
<p>To illustrate the use of <code>osm_structures</code> to download data, this section reproduces the code that was used to generate the <code>london</code> data object which forms part of the <code>osmplotr</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">structures &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'highway'</span>, <span class="st">'highway'</span>, <span class="st">'building'</span>, <span class="st">'building'</span>, <span class="st">'building'</span>,
                 <span class="st">'amenity'</span>, <span class="st">'park'</span>, <span class="st">'natural'</span>, <span class="st">'tree'</span>)
structs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (<span class="dt">structures =</span> structures, <span class="dt">col_scheme =</span> <span class="st">'dark'</span>)
structs<span class="op">$</span>value [<span class="dv">1</span>] &lt;-<span class="st"> '!primary'</span>
structs<span class="op">$</span>value [<span class="dv">2</span>] &lt;-<span class="st"> 'primary'</span>
structs<span class="op">$</span>suffix [<span class="dv">2</span>] &lt;-<span class="st"> 'HP'</span>
structs<span class="op">$</span>value [<span class="dv">3</span>] &lt;-<span class="st"> '!residential'</span>
structs<span class="op">$</span>value [<span class="dv">4</span>] &lt;-<span class="st"> 'residential'</span>
structs<span class="op">$</span>value [<span class="dv">5</span>] &lt;-<span class="st"> 'commercial'</span>
structs<span class="op">$</span>suffix [<span class="dv">3</span>] &lt;-<span class="st"> 'BNR'</span>
structs<span class="op">$</span>suffix [<span class="dv">4</span>] &lt;-<span class="st"> 'BR'</span>
structs<span class="op">$</span>suffix [<span class="dv">5</span>] &lt;-<span class="st"> 'BC'</span></code></pre></div>
<p>Suffices are generated automatically from structure names only, not values, and the suffices for negated forms must therefore be specified manually. The <code>london</code> data can then be downloaded by simply calling <code>make_osm_map</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">london &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> structs, <span class="dt">bbox =</span> bbox)
london &lt;-<span class="st"> </span>london<span class="op">$</span>osm_data</code></pre></div>
<p>The requested data are contained in the <code>$osm_data</code> list item. <code>make_osm_map</code> also returns a <code>$map</code> item which is described below (see <a href="#3.3%20make-osm-map">3.3. Automating map production</a>).</p>
</div>
</div>
<div id="downloading-connected-highways" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-connected-highways" class="anchor"></a><a name="2.5%20highways"></a>2.5 Downloading connected highways</h2>
<p>The visualisation functions described in the second <code>osmplotr</code> vignette (<a href="https://cran.r-project.org/package=osmplotr">Data maps</a>) enable particular regions of maps to be highlighted. While it may often be desirable to highlight regions according to a user’s own data, <code>osmplotr</code> also enables regions to be defined by providing a list of the names of encircling highways. The function which achieves this is <code>connect_highways</code>, which returns a sequential list of <code>SpatialPoints</code> from those segments of the named highways which connected continuously and sequentially to form a single enclosed space. An example is,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">highways &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'Monmouth.St'</span>, <span class="st">'Short.?s.Gardens'</span>, <span class="st">'Endell.St'</span>, <span class="st">'Long.Acre'</span>,
               <span class="st">'Upper.Saint.Martin'</span>)
highways1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/connect_highways.html">connect_highways</a></span> (<span class="dt">highways =</span> highways, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>Note the use of the <a href="https://en.wikipedia.org/wiki/Regular_expression">regex</a> character <code>?</code> which declares that the previous character is optional. This matches both “Shorts Gardens” and “Short’s Gardens”, both of which appear in OSM data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span> (highways1); <span class="kw">length</span> (highways1); <span class="kw">head</span> (<span class="kw">coordinates</span> (highways1))</code></pre></div>
<pre><code>## [1] "SpatialPoints"
## attr(,"package")
## [1] "sp"</code></pre>
<pre><code>## [1] 55</code></pre>
<pre><code>##     coords.x1 coords.x2
## 14 -0.1250003  51.51480
## 15 -0.1254141  51.51457
## 16 -0.1257428  51.51440
## 17 -0.1259169  51.51430
## 18 -0.1260387  51.51424
## 19 -0.1269318  51.51381</code></pre>
<p>Other examples, which are also included in the provided <code>london</code> data, include:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">highways &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'Endell.St'</span>, <span class="st">'High.Holborn'</span>, <span class="st">'Drury.Lane'</span>, <span class="st">'Long.Acre'</span>)
highways2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/connect_highways.html">connect_highways</a></span> (<span class="dt">highways =</span> highways, <span class="dt">bbox =</span> bbox)
highways &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'Drury.Lane'</span>, <span class="st">'High.Holborn'</span>, <span class="st">'Kingsway'</span>, <span class="st">'Great.Queen.St'</span>)
highways3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/connect_highways.html">connect_highways</a></span> (<span class="dt">highways =</span> highways, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>The extraction of bounding polygons from named highways is not failsafe, and may generate various warning messages. To understand the kinds of conditions under which it may not work, it is useful to examine <code>connect_highways</code> in more detail.</p>
<div id="connect_highways-in-detail" class="section level3">
<h3 class="hasAnchor">
<a href="#connect_highways-in-detail" class="anchor"></a><a name="2.5.1%20highways-detail"></a>2.5.1 <code>connect_highways</code> in detail</h3>
<p><code>connect_highways</code> takes a list of OpenStreetMap highways and sequentially connects closest nodes of adjacent highways until the set of named highways connects to form a cycle. Cases where no circular connection is possible generate an error message. The routine proceeds through the three stages of,</p>
<ol style="list-style-type: decimal">
<li><p>Adding intersection nodes to junctions of ways where these don’t already exist</p></li>
<li><p>Filling a connectivity matrix between the listed highways and extracting the <strong>longest</strong> cycle connecting all of them</p></li>
<li><p>Inserting extra connections between highways until the length of the longest cycle is equal to <code>length (highways)</code>.</p></li>
</ol>
<p>However, even once the highways are connected, the individual components of each highway may not necessarily connect in a continuous manner to complete the cycle. The final task is thus ensuring that the components of each individual highway actually connect, through sequentially connecting the closest pairs of components until a shortest path is possible between the two components which connect with other highways.</p>
<p>This procedure can not be guaranteed failsafe owing both to the inherently unpredictable nature of OpenStreetMap, as well as to the unknown relationships between named highways. To enable problematic cases to be examined and hopefully resolved, <code>connect_highways</code> has a <code>plot</code> option:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bbox_big &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_bbox.html">get_bbox</a></span> (<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.15</span>, <span class="fl">51.5</span>, <span class="op">-</span><span class="fl">0.10</span>, <span class="fl">51.52</span>))
highways &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'Kingsway'</span>, <span class="st">'Holborn'</span>, <span class="st">'Farringdon.St'</span>, <span class="st">'Strand'</span>,
               <span class="st">'Fleet.St'</span>, <span class="st">'Aldwych'</span>)
highway_list &lt;-<span class="st"> </span><span class="kw"><a href="../reference/connect_highways.html">connect_highways</a></span> (<span class="dt">highways =</span> highways, <span class="dt">bbox =</span> bbox_big,
                                  <span class="dt">plot =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Warning message:
## In get_highway_cycles(ways) : Cycle unable to be extended through all ways</code></pre></div>
<p><img src="basic-maps_files/figure-html/connect-highways-manual-plot-1.png" width="384"></p>
<p>The plot depicts each highway in a different colour, along with numbers at start and end points of each segment. This plot reveals in this case that highway#6 (‘Aldwych’) is actually nested within two components of highway#4 (‘Strand’). <code>connect_highways</code> searches for the shortest path connecting all named highways, and since ‘Strand’ connects to both highways#1 and #5, the shortest path excludes #6. This exclusion of one of the named components generates the warning message.</p>
</div>
</div>
<div id="producing-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#producing-maps" class="anchor"></a><a name="3%20maps"></a>3. Producing maps</h2>
<p>Maps will generally contain multiple kinds of OSM data, for example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_B &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'building'</span>, <span class="dt">bbox =</span> bbox)
dat_H &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'highway'</span>, <span class="dt">bbox =</span> bbox)
dat_T &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'natural'</span>, <span class="dt">value =</span> <span class="st">'tree'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<p>As illustrated above, plotting maps requires first making a basemap with a specified background colour. Portions of maps can also be plotted by creating a <code>basemap</code> with a smaller bounding box.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bbox_small &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_bbox.html">get_bbox</a></span> (<span class="kw">c</span>(<span class="op">-</span><span class="fl">0.13</span>, <span class="fl">51.51</span>, <span class="op">-</span><span class="fl">0.11</span>, <span class="fl">51.52</span>))
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_basemap.html">osm_basemap</a></span> (<span class="dt">bbox =</span> bbox_small, <span class="dt">bg =</span> <span class="st">'gray20'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_H, <span class="dt">col =</span> <span class="st">'gray70'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_B, <span class="dt">col =</span> <span class="st">'gray40'</span>)</code></pre></div>
<p><code>map</code> is then a <code>ggplot2</code> which may be viewed simply by passing it to <code>print_osm_map</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a2.png">
</div>
<p>Other graphical parameters can also be passed to <code>add_osm_objects</code>, such as border colours or line widths and types. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_basemap.html">osm_basemap</a></span> (<span class="dt">bbox =</span> bbox_small, <span class="dt">bg =</span> <span class="st">'gray20'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_B, <span class="dt">col =</span> <span class="st">'gray40'</span>, <span class="dt">border =</span> <span class="st">'orange'</span>,
                        <span class="dt">size =</span> <span class="fl">0.2</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a3.png">
</div>
<p>The <code>size</code> argument is passed to the corresponding <code>ggplot2</code> routine for plotting polygons, lines, or points, and respectively determines widths of lines (for polygon outlines and for lines), and sizes of points. The <code>col</code> argument determines the fill colour of polygons, or the colour of lines or points.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_H, <span class="dt">col =</span> <span class="st">'gray70'</span>, <span class="dt">size =</span> <span class="fl">0.7</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_T, <span class="dt">col =</span> <span class="st">'green'</span>, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">shape =</span> <span class="dv">1</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a4.png">
</div>
<p>Note also that the <code>shape</code> parameter determines the point shape, for details of which see <code>?ggplot2::shape</code>. Also note that plot order affects the final outcome, because components are sequentially overlaid and thus the same map components plotted in a different order will generally produce a different result.</p>
</div>
<div id="saving-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-maps" class="anchor"></a><a name="3.1%20saving-maps"></a>3.1 Saving Maps</h2>
<p>The function <code><a href="../reference/print_osm_map.html">print_osm_map()</a></code> can be used to print either to on-screen graphical devices or to graphics files (see, for example, <code>?png</code> for a list of possible graphics devices). Sizes and resolutions of devices may be specified with the appropriate parameters. Device dimensions are scaled by default to the proportions of the bounding box (although this can be over-ridden).</p>
<p>A screen-based device simply requires</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<p>while examples of writing higher resolution versions to files include:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map, <span class="dt">filename =</span> <span class="st">"map.png"</span>, <span class="dt">width =</span> <span class="dv">10</span>, <span class="dt">units =</span> <span class="st">"in"</span>, <span class="dt">dpi =</span> <span class="dv">72</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map, <span class="dt">filename =</span> <span class="st">"map.eps"</span>, <span class="dt">width =</span> <span class="dv">1000</span>, <span class="dt">units =</span> <span class="st">"px"</span>, <span class="dt">dpi =</span> <span class="dv">72</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map, <span class="dt">filename =</span> <span class="st">"map"</span>, <span class="dt">device =</span> <span class="st">"jpeg"</span>, <span class="dt">width =</span> <span class="dv">10</span>, <span class="dt">units =</span> <span class="st">"cm"</span>)</code></pre></div>
</div>
<div id="plotting-different-osm-structures" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-different-osm-structures" class="anchor"></a><a name="3.2%20osm-structures"></a>3.2 Plotting different OSM Structures</h2>
<p>The ability demonstrated above to use negation in <code>extract-osm-objects</code> allows different kinds of the same object to be visually contrasted, for example primary and non-primary highways:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_HP &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'highway'</span>, <span class="dt">value =</span> <span class="st">'primary'</span>, <span class="dt">bbox =</span> bbox)
dat_H &lt;-<span class="st"> </span><span class="kw"><a href="../reference/extract_osm_objects.html">extract_osm_objects</a></span> (<span class="dt">key =</span> <span class="st">'highway'</span>, <span class="dt">value =</span> <span class="st">'!primary'</span>, <span class="dt">bbox =</span> bbox)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_basemap.html">osm_basemap</a></span> (<span class="dt">bbox =</span> bbox_small, <span class="dt">bg =</span> <span class="st">'gray20'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_H, <span class="dt">col =</span> <span class="st">'gray50'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_HP, <span class="dt">col =</span> <span class="st">'gray80'</span>, <span class="dt">size =</span> <span class="dv">2</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a5.png">
</div>
<p>The additional <code>key-value</code> pairs demonstrated above (for Royal Festival Hall, <code>dat_RFH</code> and 150 Stamford Street, <code>dat_ST</code>) also demonstrated above allow for highly customised maps in which distinct objects are plotting with different colour schemes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bbox_small2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_bbox.html">get_bbox</a></span> (<span class="kw">c</span> (<span class="op">-</span><span class="fl">0.118</span>, <span class="fl">51.504</span>, <span class="op">-</span><span class="fl">0.110</span>, <span class="fl">51.507</span>))
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_basemap.html">osm_basemap</a></span> (<span class="dt">bbox =</span> bbox_small2, <span class="dt">bg =</span> <span class="st">'gray95'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_H, <span class="dt">col =</span> <span class="st">'gray80'</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_HP, <span class="dt">col =</span> <span class="st">'gray60'</span>, <span class="dt">size =</span> <span class="dv">2</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_RFH, <span class="dt">col =</span> <span class="st">'orange'</span>, <span class="dt">border =</span> <span class="st">'red'</span>, <span class="dt">size =</span> <span class="dv">2</span>)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_osm_objects.html">add_osm_objects</a></span> (map, dat_ST, <span class="dt">col =</span> <span class="st">'skyblue'</span>, <span class="dt">border =</span> <span class="st">'blue'</span>, <span class="dt">size =</span> <span class="dv">2</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a7.png">
</div>
</div>
<div id="automating-map-production" class="section level2">
<h2 class="hasAnchor">
<a href="#automating-map-production" class="anchor"></a><a name="3.3%20make-osm-map"></a>3.3. Automating map production</h2>
<p>As indicated above (<a href="#2.4%20downloading2">2.4 Downloading with <code>osm_structures</code> and <code>make_osm_map</code></a>), the production of maps overlaying various type of OSM objects is facilitated with <code>make_osm_map</code>. The structure of a map is defined by <code>osm_structures</code> as described above.</p>
<p>Producing a map with customised data is as simple as,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">structs &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'highway'</span>, <span class="st">'building'</span>, <span class="st">'park'</span>, <span class="st">'grass'</span>, <span class="st">'tree'</span>)
structures &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (<span class="dt">structures =</span> structs, <span class="dt">col_scheme =</span> <span class="st">'light'</span>)
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> structures, <span class="dt">bbox =</span> bbox_small)
map &lt;-<span class="st"> </span>dat<span class="op">$</span>map
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a8.png">
</div>
<p>Calling <code><a href="../reference/make_osm_map.html">make_osm_map()</a></code> downloads the requested structures within the given <code>bbox</code> and returns a list of two components, the first of which contains the downloaded data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span> (dat); <span class="kw">names</span> (dat<span class="op">$</span>osm_data)</code></pre></div>
<pre><code>## [1] "osm_data" "map"</code></pre>
<pre><code>## [1] "dat_B" "dat_H" "dat_P" "dat_A" "dat_G" "dat_T"</code></pre>
<p>Pre-downloaded data may also be passed to <code><a href="../reference/make_osm_map.html">make_osm_map()</a></code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> structures, <span class="dt">osm_data =</span> dat<span class="op">$</span>osm_data)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (dat<span class="op">$</span>map)</code></pre></div>
<div class="figure">
<img src="map_a9.png">
</div>
<p>In this case, because no bounding box was passed to <code>make_osm_map</code>, a bounding box is extracted as the <strong>largest</strong> box spanning all objects in <code>osm_data</code>. These objects include highways which extend beyond the defining bounding box, and the large park in the south east. The <code>bbox</code> argument may simply be passed to restore this map to the previous version:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> structures, <span class="dt">osm_data =</span> dat<span class="op">$</span>osm_data,
                     <span class="dt">bbox =</span> bbox_small)</code></pre></div>
<p>Objects in maps are overlaid on the plot according to the order of rows in <code>osm_structures</code>, with the single exception that <code>background</code> is plotted first. This order can be readily changed or restricted simply by submitting structures in a desired order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">structs &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">'amenity'</span>, <span class="st">'building'</span>, <span class="st">'grass'</span>, <span class="st">'highway'</span>, <span class="st">'park'</span>)
<span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (structs, <span class="dt">col_scheme =</span> <span class="st">'light'</span>)</code></pre></div>
<pre><code>##    structure      key value suffix      cols
## 1    amenity  amenity            A #DCDCDCFF
## 2   building building            B #C8C8C8FF
## 3      grass  landuse grass      G #C8FFC8FF
## 4    highway  highway            H #969696FF
## 5       park  leisure  park      P #C8DCC8FF
## 6 background                          gray95</code></pre>
</div>
<div id="axes" class="section level2">
<h2 class="hasAnchor">
<a href="#axes" class="anchor"></a><a name="3.4%20axes"></a>3.4 Axes</h2>
<p>Axes may be added to maps using the <code>add_axes</code> function. In contrast to many <code>R</code> packages for producing maps, maps in <code>osmplotr</code> fill the entire plotting space, and axes are added <em>internal</em> to this space. The separate function for adding axes allows them to be overlaid on top of all previous layers.</p>
<p>Axes added to a dark version of the previous map look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">structures &lt;-<span class="st"> </span><span class="kw"><a href="../reference/osm_structures.html">osm_structures</a></span> (<span class="dt">structures =</span> structs, <span class="dt">col_scheme =</span> <span class="st">'dark'</span>)
dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_osm_map.html">make_osm_map</a></span> (<span class="dt">structures =</span> structures, <span class="dt">osm_data =</span> dat<span class="op">$</span>osm_dat,
                     <span class="dt">bbox =</span> bbox_small)
map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_axes.html">add_axes</a></span> (dat<span class="op">$</span>map, <span class="dt">colour =</span> <span class="st">'black'</span>)</code></pre></div>
<p>Note that, as described above, <code>make_osm_map</code> returns a list of two items: (i) potentially modified data (in <code>$osm_data</code>) and (ii) the map object (in <code>$map</code>). All other <code>add_</code> functions take a map object as one argument and return the single value of the modified map object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a10.png">
</div>
<p>This map reveals that the axes and labels are printed above semi-transparent background rectangles, with transparency controlled by the <code>alpha</code> parameter. Axes are always plotted on the left and lower side, but positions can be adjusted with the <code>pos</code> parameter which specifies the,</p>
<blockquote>
<p>Positions of axes and labels relative to entire plot device</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map &lt;-<span class="st"> </span><span class="kw"><a href="../reference/add_axes.html">add_axes</a></span> (map, <span class="dt">colour =</span> <span class="st">'blue'</span>, <span class="dt">pos =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>),
                      <span class="dt">fontsize =</span> <span class="dv">5</span>, <span class="dt">fontface =</span> <span class="dv">3</span>, <span class="dt">fontfamily =</span> <span class="st">"Times"</span>)
<span class="kw"><a href="../reference/print_osm_map.html">print_osm_map</a></span> (map)</code></pre></div>
<div class="figure">
<img src="map_a11.png">
</div>
<p>The second call to <code>add_axes</code> overlaid additional axes on a map that already had axes from the previous call. This call also demonstrates how sizes and other font characteristics of text labels can be specified.</p>
<p>Finally, the current version of <code>osmplotr</code> does not allow text labels of axes to be rotated. (This is because the semi-transparent underlays are generated with <code>ggplot2::geom_label</code> which currently prevents rotation.)</p>
<p>Click on the following link to proceed to the second <code>osmplotr</code> vignette: <a href="https://cran.r-project.org/package=osmplotr">Data maps</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#contents">Contents</a></li>
      <li>
<a href="#introduction"></a><a name="1%20intro"></a>1. Introduction</li>
      <li>
<a href="#downloading-data"></a><a name="2%20downloading"></a>2. Downloading Data</li>
      <li>
<a href="#negation"></a><a name="2.1%20negation"></a>2.1 Negation</li>
      <li>
<a href="#additional-key-value-pairs"></a><a name="2.2%20keyval-pairs"></a>2.2 Additional <code>key-value</code> pairs</li>
      <li>
<a href="#a-note-on-rivers"></a><a name="2.3%20rivers"></a>2.3 A note on rivers</li>
      <li>
<a href="#downloading-with-osm_structures-and-make_osm_map"></a><a name="2.4%20downloading2"></a>2.4 Downloading with <code>osm_structures</code> and <code>make_osm_map</code>
</li>
      <li>
<a href="#downloading-connected-highways"></a><a name="2.5%20highways"></a>2.5 Downloading connected highways</li>
      <li>
<a href="#producing-maps"></a><a name="3%20maps"></a>3. Producing maps</li>
      <li>
<a href="#saving-maps"></a><a name="3.1%20saving-maps"></a>3.1 Saving Maps</li>
      <li>
<a href="#plotting-different-osm-structures"></a><a name="3.2%20osm-structures"></a>3.2 Plotting different OSM Structures</li>
      <li>
<a href="#automating-map-production"></a><a name="3.3%20make-osm-map"></a>3.3. Automating map production</li>
      <li>
<a href="#axes"></a><a name="3.4%20axes"></a>3.4 Axes</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Mark Padgham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
